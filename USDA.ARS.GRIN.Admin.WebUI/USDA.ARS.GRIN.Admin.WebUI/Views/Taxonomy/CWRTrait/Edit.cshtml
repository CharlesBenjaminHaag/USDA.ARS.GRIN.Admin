@model USDA.ARS.GRIN.Admin.WebUI.ViewModels.Taxonomy.CWRTraitEditViewModel
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!--
======================================================================================================
REVISION HISTORY
======================================================================================================
-->
@if (Model.ID > 0)
{
    <div class="row">
        <div class="col-md-12">
            <div class="callout callout-info" style="vertical-align:middle;">
                @Html.Raw(Model.RevisionHistoryText)
            </div>
        </div>
    </div>
}

@using (Html.BeginForm("CWRTraitEdit", "Taxonomy", FormMethod.Post, new { id = "frmEdit" }))
{
    @Html.HiddenFor(x => x.ID)
    @Html.HiddenFor(x => x.CurrentID)
    <div class="box box-default">
        <div class="box-header">
            <h3 class="box-title"><a name="section-detail"></a>Summary</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
        </div>
        <div class="box-body">
        
        </div>
    </div>
}

<script type="text/javascript">
    
    function SelectNote(noteText) {
        $('#modal-note-search').modal('hide');
        CKEDITOR.instances.txtNote.setData(noteText);
    }

    function LoadBreedingTypeCodes(traitClassCode) {
        var breedingTypeCodesSelect = $('#ddlBreedingTypeCodes');
        breedingTypeCodesSelect.empty();

        $.getJSON('@Url.Action("GetBreedingTypes")', { traitClassCode: traitClassCode }, function (breedingTypeCodes) {
            if (breedingTypeCodes != null && !jQuery.isEmptyObject(breedingTypeCodes))
            {
                breedingTypeCodesSelect.append($('<option/>', {
                    value: null,
                    text: "Select a breeding type"
                }));
                $.each(breedingTypeCodes, function (index, breedingTypeCode) {
                    breedingTypeCodesSelect.append($('<option/>', {
                        value: breedingTypeCode.ID,
                        text: breedingTypeCode.Title
                    }));
                });
            };
        });
    }

    function LoadCitations(speciesId) {
        var citationsSelect = $('#ddlCitations');
        citationsSelect.empty();

        if (speciesId != null && speciesId != '') {
            $.getJSON('@Url.Action("GetCitations")', { speciesId: speciesId }, function (citations) {
                if (citations != null && !jQuery.isEmptyObject(citations)) {
                    citationsSelect.append($('<option/>', {
                        value: null,
                        text: "Select a citation"
                    }));
                    $.each(citations, function (index, citation) {
                        citationsSelect.append($('<option/>', {
                            value: citation.ID,
                            text: citation.Title
                        }));
                    });
                    citationsSelect.prop("disabled", false);
                }
                else {
                    citationsSelect.prop("disabled", true);
                };
            });
        }
    }
</script>
